(this.webpackJsonpkeepapp=this.webpackJsonpkeepapp||[]).push([[0],{52:function(e,t,n){},66:function(e,t){},67:function(e,t){},68:function(e,t){},70:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n.n(a),c=n(40),s=n.n(c),r=(n(52),n(21)),o=n(5),l=n(37),m=n(41),u=n.n(m);function d(){var e=Object(o.g)(),t=Object(o.f)(),n=Object(o.e)(),i=Object(o.h)();return Object(a.useMemo)((function(){return{push:n.push,replace:n.replace,pathname:t.pathname,query:Object(l.a)(Object(l.a)({},u.a.parse(t.search)),e),match:i,location:t,history:n}}),[e,i,t,n])}var p=n(83),g=n(2),j=Object(p.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},container:{display:"flex",alignItems:"center"},logoImage:{width:"85vw",marginTop:"15vh",marginBottom:"10vh"},routerIcon:{width:"30vw"}});function h(){var e=j(),t=d();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/start/start.png",alt:"",className:e.logoImage}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("img",{src:"images/start/home.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/home")}}),Object(g.jsx)("img",{src:"images/start/hard.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/hard")}}),Object(g.jsx)("img",{src:"images/start/soft.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/soft")},style:{marginTop:"1.2vh"}})]})]})}var x=Object(p.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},image:{width:375,margin:"10px"}});function b(){var e=x(),t=d();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/home/header.png",alt:"header",className:e.image}),Object(g.jsx)("img",{src:"images/home/1.png",alt:"todo",className:e.image,onClick:function(){return t.push("/soft")}}),Object(g.jsx)("img",{src:"images/home/2.png",alt:"todo",className:e.image}),Object(g.jsx)("img",{src:"images/home/3.png",alt:"todo",className:e.image}),Object(g.jsx)("img",{src:"images/home/bottom.png",alt:"bottom",className:e.image})]})}var f=n(8);var O=n(17),v=n.n(O),y=n(30),w=n(23),N="models/",C=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.d(N);case 2:return e.next=4,w.c(N);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t=e.onEmotionChange,n=e.ifHard,i=Object(a.useRef)(null),c=Object(a.useState)(!1),s=Object(f.a)(c,2),r=s[0],o=s[1];r||(C(),o(!0)),Object(a.useEffect)((function(){l()}),[i]);var l=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{width:262,height:337,facingMode:"user"}});case 2:t=e.sent,(n=i.current).srcObject=t,n.play();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(y.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(512,.5,n=new w.a({inputSize:512,scoreThreshold:.5}),!i.current){e.next=7;break}return e.next=6,w.b(i.current,n).withFaceExpressions();case 6:a=e.sent;case 7:a&&t(a.expressions),setTimeout((function(){return m()}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{children:Object(g.jsx)("video",{ref:i,onLoadedMetadata:m,style:{display:n?"initial":"none"}})})})},I=Object(p.a)({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},progressBar:{width:"50px",height:"50px;",borderRadius:"50%",opacity:"0.6",zIndex:3,position:"relative",right:"35px",bottom:"30px"},checkedImage:{width:"58px",height:"58px",position:"relative",right:"40px",zIndex:2},imageNow:{width:"58px",height:"58px",position:"relative",right:"40px",top:"27px",zIndex:2},imageNext:{width:"29px",height:"29px"}}),F={angry:"images/emotions/angry.png",happy:"images/emotions/happy.png",surprised:"images/emotions/surprised.png"},B={angry:"images/emotions/angryNext.png",happy:"images/emotions/happyNext.png",surprised:"images/emotions/surprisedNext.png"},S=["happy","surprised","angry","surprised","happy"];function D(e){var t=e.emotion,n=e.onProgressChange,i=e.initCount,c=I(),s=Object(a.useState)(+i||0),r=Object(f.a)(s,2),o=r[0],l=r[1],m=Object(a.useState)(!1),u=Object(f.a)(m,2),d=u[0],p=u[1];return t&&function(e){e[S[o]]>={surprised:.99,happy:.99,angry:.1}[S[o]]&&(p(!0),l(o+1),n({count:o+1,length:S.length}),setTimeout((function(){p(!1)}),1e3))}(t),Object(g.jsxs)("div",{className:c.root,children:[d?Object(g.jsx)("img",{src:"images/icons/checked.svg",alt:"",className:c.checkedImage}):Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:F[S[o]],alt:"emotion",className:c.imageNow}),Object(g.jsx)("div",{className:c.progressBar,style:{background:"linear-gradient(to top, #B3DDFB ".concat(function(e){var t;return 10*(~~((e?100*(null===(t=e[S[o]])||void 0===t?void 0:t.toFixed(2)):0)/10)+{surprised:0,happy:-1,angry:1}[S[o]])}(t),"%, white 0%)")}})]}),Object(g.jsx)("img",{src:B[S[o+1]],alt:"emotion",className:c.imageNext})]})}var T=n(85),E=n(46),q=Object(E.a)((function(e){return{root:{height:10},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{backgroundColor:"#6DBEF8"}}}))(T.a),z=Object(p.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"},progresser:{margin:"2.5em 1.5em"},stopContainer:{marginBottom:"1em"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"3.5em",height:"5.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"},bottom:{width:"80vw",display:"flex",justifyContent:"space-around",alignItems:"center",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 12)",borderRadius:"0.8em",margin:"50px"}});function R(){var e=z(),t=d(),n=Object(a.useState)(null),i=Object(f.a)(n,2),c=i[0],s=i[1],r=Object(a.useState)(null),o=Object(f.a)(r,2),l=o[0],m=o[1];Object(a.useEffect)((function(){l&&l.count===l.length-1&&t.push("/softend")}),[l]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:e.progresser,children:Object(g.jsx)(q,{variant:"determinate",value:l?function(e){return~~(100*e.count/e.length)}(l):t.query.count?~~(100*t.query.count/t.query.length):0})}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("div",{className:e.stopContainer,onClick:function(e){t.push("/stop/query?count=".concat(null===l||void 0===l?void 0:l.count,"&length=").concat(null===l||void 0===l?void 0:l.length))},children:Object(g.jsx)("img",{src:"images/icons/stop.png",alt:"stop"})}),Object(g.jsx)("iframe",{src:"https://ryan-yang125.github.io/face-capture/",title:"camera",allow:"camera; microphone",frameBorder:"0"}),Object(g.jsx)(k,{onEmotionChange:function(e){s(e)}}),Object(g.jsxs)("div",{className:e.bottom,children:[Object(g.jsx)("div",{className:e.blueButton,onClick:function(){t.push("/detailsoft")},children:"\u67e5\u770b\u8bb2\u89e3"}),Object(g.jsx)(D,{emotion:c,onProgressChange:function(e){m(e)},initCount:t.query.count})]})]})]})}var U=Object(p.a)({root:{},arrowIcon:{width:"40vw"},checkIcon:{width:"20vw"}});function H(){var e=U(),t=d(),n=Object(a.useState)(0),i=Object(f.a)(n,2),c=i[0],s=i[1],r=Object(a.useState)(!1),o=Object(f.a)(r,2),l=o[0],m=o[1];c>=8&&t.push("/hardend");return Object(a.useEffect)((function(){var e=setTimeout((function(){l&&s(c+1),m(!l)}),3e3);return function(){clearTimeout(e)}}),[c,l]),Object(g.jsx)("div",{className:e.root,children:Object(g.jsx)("img",{src:function(e){return l?"images/icons/checked.svg":"images/hard/h".concat(e,".png")}(c),alt:"",className:e.arrowIcon})})}var M=Object(p.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"},progresser:{margin:"2.5em 1.5em"},stopContainer:{marginBottom:"1em"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"3.5em",height:"5.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"},bottom:{width:"80vw",display:"flex",justifyContent:"space-around",alignItems:"center",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 12)",borderRadius:"0.8em",margin:"3vh"},tipC:{}});function P(){var e=M(),t=d(),n=Object(a.useState)(0),i=Object(f.a)(n,2),c=i[0],s=i[1];Object(a.useEffect)((function(){var e=setTimeout((function(){s(c+12)}),0===c?3e3:6e3);return function(){clearTimeout(e)}}),[c]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:e.progresser,children:Object(g.jsx)(q,{variant:"determinate",value:c})}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("div",{className:e.stopContainer,onClick:function(e){t.push("/stop/query?count=".concat(null===c||void 0===c?void 0:c.count,"&length=").concat(null===c||void 0===c?void 0:c.length))},children:Object(g.jsx)("img",{src:"images/icons/stop.png",alt:"stop"})}),Object(g.jsx)(k,{onEmotionChange:function(e){},ifHard:!0}),Object(g.jsx)(H,{}),Object(g.jsxs)("div",{className:e.bottom,children:[Object(g.jsx)("div",{className:e.blueButton,onClick:function(){t.push("/detailhard")},children:"\u67e5\u770b\u8bb2\u89e3"}),Object(g.jsx)("div",{className:e.tipC,children:"\u8ddf\u968f\u63d0\u793a\u6309\u6469\u9762\u90e8\u808c\u8089"})]})]})]})}var A=Object(p.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},gif:{width:"100vw"},detail:{width:"100vw",height:"60vh"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"5.5em",height:"3.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"}});function L(e){var t=e.gifUrl,n=e.detailUrl,a=A(),i=d();return Object(g.jsxs)("div",{className:a.root,children:[Object(g.jsx)("img",{src:t,alt:"",className:a.gif}),Object(g.jsx)("img",{src:n,alt:"",className:a.detail}),Object(g.jsx)("div",{className:a.blueButton,onClick:function(){i.history.goBack()},children:"\u8fd4\u56de\u8bad\u7ec3"})]})}var J=Object(p.a)({container:{display:"flex",alignItems:"center",justifyContent:"space-around"},progresser:{margin:"4.5em 1.5em"},expContainer:{width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"335px"},icon:{width:"118px"},buttonG:{display:"flex"}});function G(){var e,t=J(),n=d();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:t.progresser,children:Object(g.jsx)(q,{variant:"determinate",value:(e=n.query,~~(100*e.count/e.length))})}),Object(g.jsx)("div",{className:t.expContainer,children:Object(g.jsx)("img",{src:"images/stop/exp.png",alt:"",className:t.image})}),Object(g.jsxs)("div",{className:t.container,children:[Object(g.jsx)(K,{type:"exit",onClick:function(){n.push("/")}}),Object(g.jsx)(K,{type:"replay",onClick:function(e){n.push("/soft/query?count=".concat(n.query.count,"&length=").concat(n.query.length))}})]})]})}function K(e){var t=e.type,n=e.onClick;return Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:n,children:[Object(g.jsx)("img",{src:"images/icons/".concat(t,".svg"),alt:"",style:{width:"118px"}}),Object(g.jsx)("div",{style:{margin:"20px"},children:{exit:"\u9000\u51fa\u8bad\u7ec3",replay:"\u7ee7\u7eed\u8bad\u7ec3"}[t]})]})}var Q=Object(p.a)({root:{width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},image1:{width:"100vw"},image2:{width:"80vw"}});function V(){var e=Q();d();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/softend/1.png",alt:"",className:e.image1}),Object(g.jsx)("img",{src:"images/softend/2.png",alt:"",className:e.image2})]})}var W=Object(p.a)({root:{width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},image1:{width:"100vw",marginBottom:"10vh"},image2:{width:"80vw"}});function X(){var e=W();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/hardend/1.png",alt:"",className:e.image1}),Object(g.jsx)("img",{src:"images/softend/2.png",alt:"",className:e.image2})]})}function Y(){return Object(g.jsx)(r.a,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(o.a,{exact:!0,path:"/",component:h}),Object(g.jsx)(o.a,{path:"/home",component:b}),Object(g.jsx)(o.a,{path:"/soft",component:R}),Object(g.jsx)(o.a,{path:"/hard",component:P}),Object(g.jsx)(o.a,{path:"/softend",component:V}),Object(g.jsx)(o.a,{path:"/hardend",component:X}),Object(g.jsx)(o.a,{path:"/detailsoft",children:Object(g.jsx)(L,{gifUrl:"images/details/softDetail.gif",detailUrl:"images/details/detailsoft.png"})}),Object(g.jsx)(o.a,{path:"/detailhard",children:Object(g.jsx)(L,{gifUrl:"images/details/hardDetail.gif",detailUrl:"images/details/detailhard.png"})}),Object(g.jsx)(o.a,{path:"/stop",component:G})]})})}var Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(r.a,{children:Object(g.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[70,1,2]]]);
//# sourceMappingURL=main.6637e801.chunk.js.map