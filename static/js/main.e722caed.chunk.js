(this.webpackJsonpkeepapp=this.webpackJsonpkeepapp||[]).push([[0],{52:function(e,t,n){},66:function(e,t){},67:function(e,t){},68:function(e,t){},70:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n.n(a),c=n(40),s=n.n(c),r=(n(52),n(21)),o=n(5),l=n(36),u=n(41),m=n.n(u);function p(){var e=Object(o.g)(),t=Object(o.f)(),n=Object(o.e)(),i=Object(o.h)();return Object(a.useMemo)((function(){return{push:n.push,replace:n.replace,pathname:t.pathname,query:Object(l.a)(Object(l.a)({},m.a.parse(t.search)),e),match:i,location:t,history:n}}),[e,i,t,n])}var d=n(83),g=n(2),j=Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},container:{display:"flex",alignItems:"center"},logoImage:{width:"85vw",marginTop:"15vh",marginBottom:"10vh"},routerIcon:{width:"30vw"}});function h(){var e=j(),t=p();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/start/start.png",alt:"",className:e.logoImage}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("img",{src:"images/start/home.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/home")}}),Object(g.jsx)("img",{src:"images/start/hard.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/hard")}}),Object(g.jsx)("img",{src:"images/start/soft.png",alt:"",className:e.routerIcon,onClick:function(){return t.push("/soft")},style:{marginTop:"1.2vh"}})]})]})}var x=n(8);var b=n(17),f=n.n(b),O=n(29),v=n(23),y="models/",w=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.d(y);case 2:return e.next=4,v.c(y);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){var t=e.onEmotionChange,n=Object(a.useRef)(null),i=Object(a.useState)(!1),c=Object(x.a)(i,2),s=c[0],r=c[1];s||(w(),r(!0)),Object(a.useEffect)((function(){o()}),[n]);var o=function(){var e=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{width:262,height:337,facingMode:"user"}});case 2:t=e.sent,(a=n.current).srcObject=t,a.play();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(O.a)(f.a.mark((function e(){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(512,.5,a=new v.a({inputSize:512,scoreThreshold:.5}),!n.current){e.next=7;break}return e.next=6,v.b(n.current,a).withFaceExpressions();case 6:i=e.sent;case 7:i&&t(i.expressions),setTimeout((function(){return l()}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{children:Object(g.jsx)("video",{ref:n,onLoadedMetadata:l,style:{display:"none"}})})})},C=Object(d.a)({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},progressBar:{width:"50px",height:"50px;",borderRadius:"50%",opacity:"0.6",zIndex:3,position:"relative",right:"35px",bottom:"30px"},checkedImage:{width:"58px",height:"58px",position:"relative",right:"40px",zIndex:2},imageNow:{width:"58px",height:"58px",position:"relative",right:"40px",top:"27px",zIndex:2},imageNext:{width:"29px",height:"29px"}}),k={angry:"images/emotions/angry.png",happy:"images/emotions/happy.png",surprised:"images/emotions/surprised.png"},I={angry:"images/emotions/angryNext.png",happy:"images/emotions/happyNext.png",surprised:"images/emotions/surprisedNext.png"},F=["happy","surprised","angry","surprised","happy"];function B(e){var t=e.emotion,n=e.onProgressChange,i=e.initCount,c=C(),s=Object(a.useState)(+i||0),r=Object(x.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)(!1),m=Object(x.a)(u,2),p=m[0],d=m[1];return t&&function(e){e[F[o]]>={surprised:.99,happy:.99,angry:.1}[F[o]]?(console.log("".concat(F[o],": Ok")),d(!0),l(o+1),n({count:o+1,length:F.length}),setTimeout((function(){d(!1)}),1e3)):console.log("".concat(F[o],": No"))}(t),Object(g.jsxs)("div",{className:c.root,children:[p?Object(g.jsx)("img",{src:"images/icons/checked.svg",alt:"",className:c.checkedImage}):Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:k[F[o]],alt:"emotion",className:c.imageNow}),Object(g.jsx)("div",{className:c.progressBar,style:{background:"linear-gradient(to top, #B3DDFB ".concat(function(e){var t,n;return n=10*(~~((e?100*(null===(t=e[F[o]])||void 0===t?void 0:t.toFixed(2)):0)/10)+{surprised:0,happy:-1,angry:1}[F[o]]),console.log(F[o],n),n}(t),"%, white 0%)")}})]}),Object(g.jsx)("img",{src:I[F[o+1]],alt:"emotion",className:c.imageNext})]})}var S=n(85),q=n(46),D=Object(q.a)((function(e){return{root:{height:10},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{backgroundColor:"#6DBEF8"}}}))(S.a),E=Object(d.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"},progresser:{margin:"2.5em 1.5em"},stopContainer:{marginBottom:"1em"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"3.5em",height:"5.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"},bottom:{width:"80vw",display:"flex",justifyContent:"space-around",alignItems:"center",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 12)",borderRadius:"0.8em",margin:"50px"}});function T(){var e=E(),t=p(),n=Object(a.useState)(null),i=Object(x.a)(n,2),c=i[0],s=i[1],r=Object(a.useState)(null),o=Object(x.a)(r,2),l=o[0],u=o[1];Object(a.useEffect)((function(){l&&l.count===l.length-1&&t.push("/softend")}),[l]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:e.progresser,children:Object(g.jsx)(D,{variant:"determinate",value:l?function(e){return~~(100*e.count/e.length)}(l):t.query.count?~~(100*t.query.count/t.query.length):0})}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("div",{className:e.stopContainer,onClick:function(e){t.push("/stop/query?count=".concat(null===l||void 0===l?void 0:l.count,"&length=").concat(null===l||void 0===l?void 0:l.length))},children:Object(g.jsx)("img",{src:"images/icons/stop.png",alt:"stop"})}),Object(g.jsx)("iframe",{src:"https://ryan-yang125.github.io/face-capture/",title:"camera",allow:"camera; microphone",frameBorder:"0"}),Object(g.jsx)(N,{onEmotionChange:function(e){s(e)}}),Object(g.jsxs)("div",{className:e.bottom,children:[Object(g.jsx)("div",{className:e.blueButton,onClick:function(){t.push("/detailsoft")},children:"\u67e5\u770b\u8bb2\u89e3"}),Object(g.jsx)(B,{emotion:c,onProgressChange:function(e){u(e)},initCount:t.query.count})]})]})]})}var z=Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},image:{width:375,margin:"10px"}});function R(){var e=z(),t=p();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/home/header.png",alt:"header",className:e.image}),Object(g.jsx)("img",{src:"images/home/1.png",alt:"todo",className:e.image,onClick:function(){return t.push("/soft")}}),Object(g.jsx)("img",{src:"images/home/2.png",alt:"todo",className:e.image}),Object(g.jsx)("img",{src:"images/home/3.png",alt:"todo",className:e.image}),Object(g.jsx)("img",{src:"images/home/bottom.png",alt:"bottom",className:e.image})]})}var U=Object(d.a)({container:{display:"flex",alignItems:"center",justifyContent:"space-around"},progresser:{margin:"4.5em 1.5em"},expContainer:{width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"335px"},icon:{width:"118px"},buttonG:{display:"flex"}});function M(){var e=U(),t=p();console.log(t.query);var n;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:e.progresser,children:Object(g.jsx)(D,{variant:"determinate",value:(n=t.query,~~(100*n.count/n.length))})}),Object(g.jsx)("div",{className:e.expContainer,children:Object(g.jsx)("img",{src:"images/stop/exp.png",alt:"",className:e.image})}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)(P,{type:"exit",onClick:function(){t.push("/")}}),Object(g.jsx)(P,{type:"replay",onClick:function(e){t.push("/soft/query?count=".concat(t.query.count,"&length=").concat(t.query.length))}})]})]})}function P(e){var t=e.type,n=e.onClick;return Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:n,children:[Object(g.jsx)("img",{src:"images/icons/".concat(t,".svg"),alt:"",style:{width:"118px"}}),Object(g.jsx)("div",{style:{margin:"20px"},children:{exit:"\u9000\u51fa\u8bad\u7ec3",replay:"\u7ee7\u7eed\u8bad\u7ec3"}[t]})]})}var A=Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},gif:{width:"100vw"},detail:{width:"100vw",height:"60vh"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"5.5em",height:"3.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"}});function H(e){var t=e.gifUrl,n=e.detailUrl,a=A(),i=p();return Object(g.jsxs)("div",{className:a.root,children:[Object(g.jsx)("img",{src:t,alt:"",className:a.gif}),Object(g.jsx)("img",{src:n,alt:"",className:a.detail}),Object(g.jsx)("div",{className:a.blueButton,onClick:function(){i.history.goBack()},children:"\u8fd4\u56de\u8bad\u7ec3"})]})}var L=Object(d.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"},progresser:{margin:"2.5em 1.5em"},stopContainer:{marginBottom:"1em"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"3.5em",height:"5.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"},bottom:{width:"80vw",display:"flex",justifyContent:"space-around",alignItems:"center",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 12)",borderRadius:"0.8em",margin:"50px"},tipC:{}});function J(){var e=L(),t=p(),n=Object(a.useState)(null),i=Object(x.a)(n,2),c=(i[0],i[1]),s=Object(a.useState)(null),r=Object(x.a)(s,2),o=r[0];r[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:e.progresser,children:Object(g.jsx)(D,{variant:"determinate",value:o?function(e){return~~(100*e.count/e.length)}(o):t.query.count?~~(100*t.query.count/t.query.length):0})}),Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("div",{className:e.stopContainer,onClick:function(e){t.push("/stop/query?count=".concat(null===o||void 0===o?void 0:o.count,"&length=").concat(null===o||void 0===o?void 0:o.length))},children:Object(g.jsx)("img",{src:"images/icons/stop.png",alt:"stop"})}),Object(g.jsx)(N,{onEmotionChange:function(e){c(e)}}),Object(g.jsxs)("div",{className:e.bottom,children:[Object(g.jsx)("div",{className:e.blueButton,onClick:function(){t.push("/detailhard")},children:"\u67e5\u770b\u8bb2\u89e3"}),Object(g.jsx)("div",{className:e.tipC,children:"\u8ddf\u968f\u63d0\u793a\u6309\u6469\u9762\u90e8\u808c\u8089"})]})]})]})}var G=Object(d.a)({root:{width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},image1:{width:"100vw"},image2:{width:"80vw"}});function K(){var e=G();p();return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)("img",{src:"images/softend/1.png",alt:"",className:e.image1}),Object(g.jsx)("img",{src:"images/softend/2.png",alt:"",className:e.image2})]})}function Q(){return Object(g.jsx)(r.a,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(o.a,{exact:!0,path:"/",component:h}),Object(g.jsx)(o.a,{path:"/home",component:R}),Object(g.jsx)(o.a,{path:"/soft",component:T}),Object(g.jsx)(o.a,{path:"/hard",component:J}),Object(g.jsx)(o.a,{path:"/softend",component:K}),Object(g.jsx)(o.a,{path:"/detailsoft",children:Object(g.jsx)(H,{gifUrl:"images/details/softDetail.gif",detailUrl:"images/details/detailsoft.png"})}),Object(g.jsx)(o.a,{path:"/detailhard",children:Object(g.jsx)(H,{gifUrl:"images/details/hardDetail.gif",detailUrl:"images/details/detailhard.png"})}),Object(g.jsx)(o.a,{path:"/stop",component:M})]})})}var V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(r.a,{children:Object(g.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[70,1,2]]]);
//# sourceMappingURL=main.e722caed.chunk.js.map