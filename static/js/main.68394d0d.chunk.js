(this.webpackJsonpkeepapp=this.webpackJsonpkeepapp||[]).push([[0],{51:function(e,t,n){},60:function(e,t){},61:function(e,t){},62:function(e,t){},69:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),c=n(39),r=n.n(c),s=(n(51),n(20)),o=n(5),l=n(12),p=n(83),u=n(4);var g=n(17),d=n.n(g),m=n(29),j=n(22),h="/models",x=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.d(h);case 2:return e.next=4,j.c(h);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var t=e.onEmotionChange,n=Object(a.useRef)(null),i=Object(a.useState)(!1),c=Object(l.a)(i,2),r=c[0],s=c[1];r||(x(),s(!0)),Object(a.useEffect)((function(){o()}),[n]);var o=function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{width:262,height:337}});case 2:t=e.sent,(a=n.current).srcObject=t,a.play();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(d.a.mark((function e(){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(512,.5,a=new j.a({inputSize:512,scoreThreshold:.5}),!n.current){e.next=7;break}return e.next=6,j.b(n.current,a).withFaceExpressions();case 6:i=e.sent;case 7:i&&t(i.expressions);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{children:Object(u.jsx)("video",{ref:n,onLoadedMetadata:p})})})},f=Object(p.a)({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},progressBar:{width:"50px",height:"50px;",borderRadius:"50%",opacity:"0.6",zIndex:3,position:"relative",right:"35px",bottom:"30px"},checkedImage:{width:"58px",height:"58px",position:"relative",right:"40px",zIndex:2},imageNow:{width:"58px",height:"58px",position:"relative",right:"40px",top:"27px",zIndex:2},imageNext:{width:"29px",height:"29px"}}),O={angry:"/images/emotions/angry.png",happy:"/images/emotions/happy.png",surprised:"/images/emotions/surprised.png"},v={angry:"/images/emotions/angryNext.png",happy:"/images/emotions/happyNext.png",surprised:"/images/emotions/surprisedNext.png"},y=["happy","surprised","angry","happy","surprised","angry"];function w(e){var t=e.emotion,n=e.onProgressChange,i=e.initCount,c=f(),r=Object(a.useState)(+i||0),s=Object(l.a)(r,2),o=s[0],p=s[1],g=Object(a.useState)(!1),d=Object(l.a)(g,2),m=d[0],j=d[1];return t&&function(e){e[y[o]]>{surprised:.99,happy:.99,angry:.6}[y[o]]?(console.log("".concat(y[o],": Ok")),j(!0),p(o+1),n({count:o+1,length:y.length}),setTimeout((function(){j(!1)}),1e3)):console.log("".concat(y[o],": No"))}(t),Object(u.jsxs)("div",{className:c.root,children:[m?Object(u.jsx)("img",{src:"/images/icons/checked.svg",alt:"",className:c.checkedImage}):Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:O[y[o]],alt:"emotion",className:c.imageNow}),Object(u.jsx)("div",{className:c.progressBar,style:{background:"linear-gradient(to top, #B3DDFB ".concat(function(e){var t,n;return n=10*(~~((e?100*(null===(t=e[y[o]])||void 0===t?void 0:t.toFixed(2)):0)/10)+{surprised:0,happy:-1,angry:3}[y[o]]),console.log(y[o],n),n}(t),"%, white 0%)")}})]}),Object(u.jsx)("img",{src:v[y[o+1]],alt:"emotion",className:c.imageNext})]})}var N=n(85),C=n(45),k=Object(C.a)((function(e){return{root:{height:10},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{backgroundColor:"#6DBEF8"}}}))(N.a),F=n(36),I=n(44),B=n.n(I);function S(){var e=Object(o.g)(),t=Object(o.f)(),n=Object(o.e)(),i=Object(o.h)();return Object(a.useMemo)((function(){return{push:n.push,replace:n.replace,pathname:t.pathname,query:Object(F.a)(Object(F.a)({},B.a.parse(t.search)),e),match:i,location:t,history:n}}),[e,i,t,n])}var q=Object(p.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"},progresser:{margin:"2.5em 1.5em"},stopContainer:{marginBottom:"1em"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"3.5em",height:"5.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"},bottom:{width:"80vw",display:"flex",justifyContent:"space-around",alignItems:"center",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 12)",borderRadius:"0.8em",margin:"50px"}});function D(){var e=q(),t=S(),n=Object(a.useState)(null),i=Object(l.a)(n,2),c=i[0],r=i[1],s=Object(a.useState)(null),o=Object(l.a)(s,2),p=o[0],g=o[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:e.progresser,children:Object(u.jsx)(k,{variant:"determinate",value:p?function(e){return~~(100*e.count/e.length)}(p):t.query.count?~~(100*t.query.count/t.query.length):0})}),Object(u.jsxs)("div",{className:e.container,onClick:function(e){t.push("/stop/query?count=".concat(null===p||void 0===p?void 0:p.count,"&length=").concat(null===p||void 0===p?void 0:p.length))},children:[Object(u.jsx)("div",{className:e.stopContainer,children:Object(u.jsx)("img",{src:"/images/icons/stop.png",alt:"stop"})}),Object(u.jsx)(b,{onEmotionChange:function(e){r(e)}}),Object(u.jsxs)("div",{className:e.bottom,children:[Object(u.jsx)("div",{className:e.blueButton,onClick:function(){t.push("/detailsoft")},children:"\u67e5\u770b\u8bb2\u89e3"}),Object(u.jsx)(w,{emotion:c,onProgressChange:function(e){g(e)},initCount:t.query.count})]})]})]})}var E=Object(p.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"},image:{width:375,margin:"10px"}});function U(){var e=E(),t=S();return Object(u.jsxs)("div",{className:e.root,children:[Object(u.jsx)("img",{src:"".concat("/keepapp","/images/home/header.png"),alt:"header",className:e.image}),Object(u.jsx)("img",{src:"images/home/1.png",alt:"todo",className:e.image,onClick:function(){return t.push("/soft")}}),Object(u.jsx)("img",{src:"images/home/2.png",alt:"todo",className:e.image}),Object(u.jsx)("img",{src:"images/home/3.png",alt:"todo",className:e.image}),Object(u.jsx)("img",{src:"images/home/bottom.png",alt:"bottom",className:e.image})]})}var z=Object(p.a)({container:{display:"flex",alignItems:"center",justifyContent:"space-around"},progresser:{margin:"4.5em 1.5em"},expContainer:{width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"335px"},icon:{width:"118px"},buttonG:{display:"flex"}});function T(){var e=z(),t=S();console.log(t.query);var n;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:e.progresser,children:Object(u.jsx)(k,{variant:"determinate",value:(n=t.query,~~(100*n.count/n.length))})}),Object(u.jsx)("div",{className:e.expContainer,children:Object(u.jsx)("img",{src:"/images/stop/exp.png",alt:"",className:e.image})}),Object(u.jsxs)("div",{className:e.container,children:[Object(u.jsx)(P,{type:"exit",onClick:function(){t.push("/")}}),Object(u.jsx)(P,{type:"replay",onClick:function(e){t.push("/soft/query?count=".concat(t.query.count,"&length=").concat(t.query.length))}})]})]})}function P(e){var t=e.type,n=e.onClick;return Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:n,children:[Object(u.jsx)("img",{src:"/images/icons/".concat(t,".svg"),alt:"",style:{width:"118px"}}),Object(u.jsx)("div",{style:{margin:"20px"},children:{exit:"\u9000\u51fa\u8bad\u7ec3",replay:"\u7ee7\u7eed\u8bad\u7ec3"}[t]})]})}var R=Object(p.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",width:"75vw"},gif:{width:"75vw"},detail:{width:"75vw",height:"45vh"},blueButton:{backgroundColor:"#0095FF",color:"#E8F5FF",width:"5.5em",height:"3.5em",fontSize:"14px",textAlign:"center",borderRadius:"0.5em",boxShadow:"0px 7px 12px 0px rgba(152, 152, 152, 58)",padding:"0.5em",lineHeight:"1.8em",paddingTop:"0.9em"}});function M(e){var t=e.gifUrl,n=e.detailUrl,a=R(),i=S();return Object(u.jsxs)("div",{className:a.root,children:[Object(u.jsx)("img",{src:t,alt:"",className:a.gif}),Object(u.jsx)("img",{src:n,alt:"",className:a.detail}),Object(u.jsxs)("div",{className:a.blueButton,onClick:function(){i.history.goBack()},children:[" ","\u8fd4\u56de\u8bad\u7ec3"," "]})]})}function L(){return Object(u.jsx)(s.a,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:U}),Object(u.jsx)(o.a,{path:"/soft",component:D}),Object(u.jsx)(o.a,{path:"/detailsoft",children:Object(u.jsx)(M,{gifUrl:"/images/details/detailgif.png",detailUrl:"/images/details/detailsoft.png"})}),Object(u.jsx)(o.a,{path:"/detailhard",children:Object(u.jsx)(M,{gifUrl:"/images/details/detailgif.png",detailUrl:"/images/details/detailhard.png"})}),Object(u.jsx)(o.a,{path:"/stop",component:T})]})})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(L,{})})}),document.getElementById("root")),A()}},[[69,1,2]]]);
//# sourceMappingURL=main.68394d0d.chunk.js.map